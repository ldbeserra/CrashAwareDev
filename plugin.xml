<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   
	<extension point="org.eclipse.ui.startup">
   		<startup class="br.ufrn.lets.crashawaredev.startup.StartupClass"/>
    </extension>
    
    <extension point="org.eclipse.core.resources.markers" 
    			id="br.ufrn.lets.view.CrashAwareDevId"
  			    name="CrashAwareDev">
		<super type="org.eclipse.core.resources.problemmarker"/>
		<persistent value="true"/>
		<attribute name="description"/>
		<super
            type="org.eclipse.core.resources.textmarker">
      </super>
	</extension>
	
	<extension point="org.eclipse.ui.views">
		<category
            name="Crash Aware Dev"
            id="br.ufrn.lets.crashawaredev">
      	</category>
      
      <view
            name="Query Crashes from Kibana"
            category="br.ufrn.lets.crashawaredev"
            class="br.ufrn.lets.crashawaredev.view.CrashView"
            id="br.ufrn.lets.crashawaredev.view.CrashViewId">
      </view>
	</extension>
	
	<extension
		point="org.eclipse.ui.commands">
      <command
            id="br.ufrn.lets.crashawaredev.view.RootCausesCommandID"
            description="Find errors top root causes in project."
            name="commandTopCauses">
      </command>
      <command
            id="br.ufrn.lets.crashawaredev.view.FindCrashesCommandID"
            description="Find last crashes from kibana."
            name="commandFindCrashes">
      </command>
  	</extension>
	
	<extension point="org.eclipse.ui.menus">
	  <menuContribution locationURI="popup:org.eclipse.ui.navigator.ProjectExplorer#PopupMenu?after=additions">
	     <menu id="CrashAwareDevId" label="CrashAwareDev"></menu>
	  </menuContribution>
	  <menuContribution locationURI="popup:CrashAwareDevId?after=additions">
	     <command commandId="br.ufrn.lets.crashawaredev.view.RootCausesCommandID"
	     		  defaultHandler="br.ufrn.lets.crashawaredev.handlers.RootCausesHandler"
	           	  label="Show Top Root Causes">
	     </command>
	     <command commandId="br.ufrn.lets.crashawaredev.view.FindCrashesCommandID"
	     		  defaultHandler="br.ufrn.lets.crashawaredev.handlers.FindCrashesHandler"
	           	  label="Show Last Crashes">
	     </command>
	  </menuContribution>
	</extension>
	
	<extension
         point="org.eclipse.ui.handlers">
         <handler
            class="br.ufrn.lets.crashawaredev.handlers.RootCausesHandler"
            commandId="br.ufrn.lets.crashawaredev.view.RootCausesCommandID">
      	</handler>
      	<handler
            class="br.ufrn.lets.crashawaredev.handlers.FindCrashesHandler"
            commandId="br.ufrn.lets.crashawaredev.view.FindCrashesCommandID">
      	</handler>
    </extension> 
	
</plugin>
